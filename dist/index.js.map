{"version":3,"file":"index.js","sources":["../node_modules/@dmail/project-structure/src/ressourceMatch.js","../node_modules/@dmail/project-structure/src/ressourceToMeta.js","../node_modules/@dmail/project-structure/src/ressourceCanContainsMetaMatching.js","../node_modules/@dmail/project-structure/src/forEachRessourceMatching.js","../src/generateReport.js","../src/prettiest.js","../src/format.js"],"sourcesContent":["// https://git-scm.com/docs/gitignore\n\nconst match = ({\n  patterns,\n  parts,\n  skipPredicate,\n  lastSkipRequired,\n  lastPatternRequired,\n  matchPart,\n  skipUntilStartsMatching = false,\n}) => {\n  let matched\n  let patternIndex = 0\n  let partIndex = 0\n  let matchIndex = 0\n\n  if (patterns.length === 0 && parts.length === 0) {\n    matched = true\n  } else if (patterns.length === 0 && parts.length) {\n    matched = true\n    matchIndex = parts.length\n  } else if (patterns.length && parts.length === 0) {\n    matched = false\n  } else {\n    matched = true\n\n    while (true) {\n      const pattern = patterns[patternIndex]\n      const part = parts[partIndex]\n      const isSkipPattern = skipPredicate(pattern)\n      const isLastPattern = patternIndex === patterns.length - 1\n      const isLastPart = partIndex === parts.length - 1\n\n      if (isSkipPattern && isLastPart && isLastPattern) {\n        matchIndex += part.length\n        break\n      }\n\n      if (isSkipPattern && isLastPattern && isLastPart === false) {\n        matchIndex += part.length\n        break\n      }\n\n      if (isSkipPattern && isLastPattern === false && isLastPart) {\n        // test next pattern on current part\n        patternIndex++\n        const nextPatternResult = match({\n          patterns: patterns.slice(patternIndex),\n          parts: parts.slice(partIndex),\n          skipPredicate,\n          lastSkipRequired,\n          lastPatternRequired,\n          matchPart,\n        })\n        matched = nextPatternResult.matched\n        patternIndex += nextPatternResult.patternIndex\n        partIndex += nextPatternResult.partIndex\n\n        if (matched && patternIndex === patterns.length - 1) {\n          matchIndex += nextPatternResult.matchIndex\n          break\n        }\n        if (matched && partIndex === parts.length - 1) {\n          matchIndex += nextPatternResult.matchIndex\n          break\n        }\n        if (matched) {\n          matchIndex += nextPatternResult.matchIndex\n          continue\n        }\n\n        // we still increase the matchIndex by the length of the part because\n        // this part has matched even if the full pattern is not satisfied\n        matchIndex += part.length\n        break\n      }\n\n      if (isSkipPattern && isLastPattern === false && isLastPart === false) {\n        // test next pattern on current part\n        patternIndex++\n\n        const skipResult = match({\n          patterns: patterns.slice(patternIndex),\n          parts: parts.slice(partIndex),\n          skipPredicate,\n          lastSkipRequired,\n          lastPatternRequired,\n          matchPart,\n          skipUntilStartsMatching: true,\n        })\n\n        matched = skipResult.matched\n        patternIndex += skipResult.patternIndex\n        partIndex += skipResult.partIndex\n        matchIndex += skipResult.matchIndex\n\n        if (matched && patternIndex === patterns.length - 1) {\n          break\n        }\n        if (matched && partIndex === parts.length - 1) {\n          break\n        }\n        if (matched) {\n          continue\n        }\n        break\n      }\n\n      const partMatch = matchPart(pattern, part)\n      matched = partMatch.matched\n      matchIndex += partMatch.matchIndex\n      if (matched === false && skipUntilStartsMatching) {\n        matchIndex += part.length\n      }\n\n      if (matched && isLastPattern && isLastPart) {\n        break\n      }\n\n      if (matched && isLastPattern && isLastPart === false) {\n        if (lastPatternRequired) {\n          matched = false\n        }\n        break\n      }\n\n      if (matched && isLastPattern === false && isLastPart) {\n        const remainingPatternAreSkip = patterns\n          .slice(patternIndex + 1)\n          .every((pattern) => skipPredicate(pattern))\n\n        if (remainingPatternAreSkip && lastSkipRequired) {\n          matched = false\n          break\n        }\n        if (remainingPatternAreSkip === false) {\n          matched = false\n          break\n        }\n        break\n      }\n\n      if (matched && isLastPattern === false && isLastPart === false) {\n        patternIndex++\n        partIndex++\n        continue\n      }\n\n      if (matched === false && skipUntilStartsMatching && isLastPart === false) {\n        partIndex++ // keep searching for that pattern\n        continue\n      }\n\n      break\n    }\n  }\n\n  return {\n    matched,\n    matchIndex,\n    patternIndex,\n    partIndex,\n  }\n}\n\nexport const ressourceMatch = (pattern, ressource) => {\n  return match({\n    patterns: pattern.split(\"/\"),\n    parts: ressource.split(\"/\"),\n    lastPatternRequired: false,\n    lastSkipRequired: true,\n    skipPredicate: (sequencePattern) => sequencePattern === \"**\",\n    matchPart: (sequencePattern, sequencePart) => {\n      return match({\n        patterns: sequencePattern.split(\"\"),\n        parts: sequencePart.split(\"\"),\n        lastPatternRequired: true,\n        lastSkipRequired: false,\n        skipPredicate: (charPattern) => charPattern === \"*\",\n        matchPart: (charPattern, charSource) => {\n          const matched = charPattern === charSource\n          return {\n            matched,\n            patternIndex: 0,\n            partIndex: 0,\n            matchIndex: matched ? 1 : 0,\n          }\n        },\n      })\n    },\n  })\n}\n","import { ressourceMatch } from \"./ressourceMatch.js\"\n\nexport const ressourceToMeta = (metaMap, ressource) => {\n  return Object.keys(metaMap).reduce((previousMeta, pattern) => {\n    const { matched } = ressourceMatch(pattern, ressource)\n    return matched ? { ...previousMeta, ...metaMap[pattern] } : previousMeta\n  }, {})\n}\n","import { ressourceMatch } from \"./ressourceMatch.js\"\nimport { ressourceToMeta } from \"./ressourceToMeta.js\"\n\nexport const ressourceCanContainsMetaMatching = (metaMap, ressource, predicate) => {\n  if (typeof metaMap !== \"object\") {\n    throw new TypeError(\n      `ressourceCanContainsMetaMatching metaMap must be an object, got ${metaMap}`,\n    )\n  }\n  if (typeof ressource !== \"string\") {\n    throw new TypeError(\n      `ressourceCanContainsMetaMatching ressource must be a string, got ${ressource}`,\n    )\n  }\n  if (typeof predicate !== \"function\") {\n    throw new TypeError(\n      `ressourceCanContainsMetaMatching predicate must be a function, got ${predicate}`,\n    )\n  }\n\n  const matchIndexForRessource = ressource.split(\"/\").join(\"\").length\n  const partialMatch = Object.keys(metaMap).some((pattern) => {\n    const { matched, matchIndex } = ressourceMatch(pattern, ressource)\n    return matched === false && matchIndex >= matchIndexForRessource && predicate(metaMap[pattern])\n  })\n  if (partialMatch) {\n    return true\n  }\n\n  // no partial match satisfies predicate, does it work on a full match ?\n  const meta = ressourceToMeta(metaMap, ressource)\n  return Boolean(predicate(meta))\n}\n","import fs from \"fs\"\nimport { ressourceCanContainsMetaMatching } from \"./ressourceCanContainsMetaMatching.js\"\nimport { ressourceToMeta } from \"./ressourceToMeta.js\"\n\nconst readDirectory = (dirname) =>\n  new Promise((resolve, reject) => {\n    fs.readdir(dirname, (error, names) => {\n      if (error) {\n        reject(error)\n      } else {\n        resolve(names)\n      }\n    })\n  })\n\nconst readStat = (filename) =>\n  new Promise((resolve, reject) => {\n    fs.stat(filename, (error, stat) => {\n      if (error) {\n        reject(error)\n      } else {\n        resolve(stat)\n      }\n    })\n  })\n\nconst nothingToDo = {}\n\nexport const forEachRessourceMatching = async (root, metaMap, predicate, callback) => {\n  if (typeof root !== \"string\") {\n    throw new TypeError(`forEachRessourceMatching metaMap must be a string, got ${root}`)\n  }\n  if (typeof metaMap !== \"object\") {\n    throw new TypeError(`forEachRessourceMatching ressource must be a object, got ${metaMap}`)\n  }\n  if (typeof predicate !== \"function\") {\n    throw new TypeError(`forEachRessourceMatching predicate must be a function, got ${predicate}`)\n  }\n  if (typeof callback !== \"function\") {\n    throw new TypeError(`forEachRessourceMatching callback must be a function, got ${callback}`)\n  }\n\n  const visitFolder = async (folder) => {\n    const folderAbsolute = folder ? `${root}/${folder}` : root\n\n    const names = await readDirectory(folderAbsolute)\n\n    const results = await Promise.all(\n      names.map(async (name) => {\n        const ressource = folder ? `${folder}/${name}` : name\n\n        const ressourceAbsolute = `${root}/${ressource}`\n        const stat = await readStat(ressourceAbsolute)\n\n        if (stat.isDirectory()) {\n          if (!ressourceCanContainsMetaMatching(metaMap, ressource, predicate)) {\n            return [nothingToDo]\n          }\n          return visitFolder(ressource)\n        }\n\n        const meta = ressourceToMeta(metaMap, ressource)\n        if (!predicate(meta)) {\n          return [nothingToDo]\n        }\n\n        const result = await callback(ressource, meta)\n        return [result]\n      }),\n    )\n\n    return results.reduce((previous, results) => {\n      return [...previous, ...results]\n    }, [])\n  }\n\n  const allResults = await visitFolder()\n  return allResults.filter((result) => result !== nothingToDo)\n}\n","import fs from \"fs\"\n\nconst { resolveConfig, getFileInfo, check } = require(\"prettier\")\n\nexport const generateReport = async ({ files }) => {\n  const report = {}\n\n  await Promise.all(\n    files.map(async (file) => {\n      const [source, options, info] = await Promise.all([\n        getFileContentAsString(file),\n        resolveConfig(file),\n        getFileInfo(file),\n      ])\n\n      if (info.ignored) return\n      const pretty = check(source, { ...options, filepath: file })\n      report[file] = pretty\n    }),\n  )\n\n  return report\n}\n\nconst getFileContentAsString = (location) =>\n  new Promise((resolve, reject) => {\n    fs.readFile(location, (error, buffer) => {\n      if (error) {\n        reject(error)\n      } else {\n        resolve(buffer.toString())\n      }\n    })\n  })\n","import { generateReport } from \"./generateReport.js\"\n\nexport const prettiest = async (options) => {\n  const report = generateReport(options)\n  const uglyFiles = Object.keys(report).filter((file) => {\n    return report[file] === false\n  })\n\n  if (uglyFiles.length) {\n    console.warn(`${uglyFiles.length} files are ugly (does not respect prettier.config.js)`)\n    console.warn(uglyFiles.join(\"\\n\"))\n    process.exit(1)\n  } else {\n    console.log(`${report.length} files are pretty :)`)\n    process.exit(0)\n  }\n}\n","import { forEachRessourceMatching } from \"@dmail/project-structure\"\nimport { prettiest } from \"./prettiest.js\"\n\nexport const format = async ({ localRoot, metaMap }) => {\n  const ressources = await forEachRessourceMatching(\n    localRoot,\n    metaMap,\n    ({ prettify }) => prettify,\n    (ressource) => ressource,\n  )\n  const files = ressources.map((ressource) => `${localRoot}/${ressource}`)\n  return prettiest({ files })\n}\n"],"names":["resolveConfig","getFileInfo","check","require","generateReport","files","report","Promise","all","map","file","source","options","info","getFileContentAsString","ignored","pretty","filepath","location","resolve","reject","fs","readFile","error","buffer","toString","prettiest","uglyFiles","Object","keys","filter","length","console","warn","join","process","exit","log","format","localRoot","metaMap","ressources","forEachRessourceMatching","prettify","ressource"],"mappings":"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"}